{}
{% load static %}
  <style>
    /* Reset and base styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0f0f0f;
      color: #eaeaea;
      line-height: 1.6;
    }
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Hero Section */
    .hero {
      height: 50vh;
      min-height: 320px;
      background: #141414;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 2rem;
      padding: 2rem;
      margin-bottom: 2rem;
    }
    .hero .profile-pic {
      width: 140px;
      height: 140px;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #111;
      color: #aaa;
      font-size: 4rem;
    }
    .hero .profile-pic img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 8px;
    }
    .hero .profile-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100%;
    }
    .hero h1 {
      font-size: 2.5rem;
      letter-spacing: 1px;
      color: #fff;
    }
    .hero .email {
      color: #cfcfcf;
      font-size: 1rem;
      margin: 0.25rem 0 1.5rem;
    }
    .hero nav {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    .hero nav a {
      color: #ffce73;
      text-decoration: none;
      border: 1px solid #2a2a2a;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    .hero nav a:hover {
      background-color: #ffce73;
      color: #141414;
    }
    .hero .privacy-toggle {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      color: #eaeaea;
      font-weight: 600;
    }
    .hero .privacy-toggle strong {
      color: #ffce73;
    }
    .hero button {
      background: #ffce73;
      border: none;
      color: #141414;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .hero button:hover {
      background: #e6b85c;
    }
    .hero form {
      margin-top: 1rem;
    }

    /* Carousel Section */
    .carousel {
      margin-bottom: 2rem;
      background: #171717;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      overflow: hidden;
      height: 250px;
      position: relative;
    }
    .carousel-inner {
      display: flex;
      transition: transform 0.5s ease;
      height: 100%;
    }
    .carousel-item {
      min-width: 100%;
      padding: 1.5rem;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: center;
      background: #1a1a1a;
      color: #eaeaea;
    }
    .carousel-item h3 {
      color: #ffce73;
      margin-bottom: 0.5rem;
      letter-spacing: 0.5px;
    }
    .carousel-item p {
      color: #cfcfcf;
      font-size: 1.1rem;
    }
    .carousel-controls {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      pointer-events: none;
    }
    .carousel-controls button {
      pointer-events: all;
      background: rgba(255, 206, 115, 0.8);
      border: none;
      color: #141414;
      font-weight: 700;
      font-size: 1.5rem;
      padding: 0.25rem 0.75rem;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    .carousel-controls button:hover {
      background: #e6b85c;
    }

    /* Tests Section */
    #tests {
      margin-bottom: 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
    }
    #tests a {
      text-decoration: none;
      display: block;
    }
    #tests .test-card {
      background: #171717;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      padding: 1rem;
      height: 160px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: background-color 0.3s;
    }
    #tests .test-card:hover {
      background: #222;
    }
    #tests .test-card header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #242424;
      padding-bottom: 0.5rem;
      margin-bottom: 0.5rem;
    }
    #tests .test-card header h3 {
      color: #ffce73;
      margin: 0;
      letter-spacing: 0.5px;
    }
    #tests .test-card header small {
      color: #cfcfcf;
    }
    #tests .test-card p {
      color: #cfcfcf;
      font-size: 0.95rem;
    }

    /* Forms Section */
    .forms-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    @media (max-width: 768px) {
      .forms-section {
        grid-template-columns: 1fr;
      }
    }
    .form-card {
      background: #171717;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      height: 400px;
    }
    .form-card header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #242424;
      padding-bottom: 0.5rem;
      margin-bottom: 0.75rem;
    }
    .form-card header h3 {
      color: #ffce73;
      margin: 0;
      letter-spacing: 0.5px;
    }
    .form-card header small {
      color: #cfcfcf;
    }
    .form-card input, .form-card textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #2a2a2a;
      border-radius: 4px;
      background: #222;
      color: #eaeaea;
      margin-bottom: 0.5rem;
    }
    .form-card button {
      background: #ffce73;
      border: none;
      color: #141414;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.3s;
      align-self: flex-end;
    }
    .form-card button:hover {
      background: #e6b85c;
    }

    /* Chat specific */
    #chat_box {
      flex: 1;
      border: 1px solid #222;
      background: #111;
      padding: 0.75rem;
      border-radius: 4px;
      overflow-y: auto;
      margin-bottom: 0.5rem;
    }
    #chat_box > div {
      margin-bottom: 0.5rem;
      display: flex;
      gap: 0.5rem;
    }
    #chat_box .time {
      min-width: 50px;
      color: #888;
      font-size: 0.8rem;
    }
    #chat_box .message-content strong {
      color: #fff;
    }
    #chat_box .message-content span {
      color: #cfcfcf;
    }

    /* Forum specific */
    #forum form {
      margin-bottom: 1rem;
    }
    #forum p {
      color: #cfcfcf;
      font-size: 0.9rem;
      margin: 0.5rem 0;
    }
    #forum h4 {
      color: #ffce73;
      margin: 1rem 0 0.5rem;
    }
    #forum .your-posts, #forum_feed {
      background: #111;
      border: 1px solid #222;
      border-radius: 4px;
      padding: 0.75rem;
      margin-bottom: 1rem;
      overflow-y: auto;
    }
    #forum .post-item {
      margin-bottom: 0.5rem;
      border-bottom: 1px solid #242424;
      padding-bottom: 0.5rem;
    }
    #forum .post-item:last-child {
      border-bottom: none;
    }
    #forum .post-item strong {
      color: #ffce73;
    }
    #forum .post-item .meta {
      color: #cfcfcf;
      font-size: 0.9rem;
      margin-top: 0.25rem;
    }
    #forum .post-item .content {
      color: #cfcfcf;
      margin-top: 0.25rem;
    }

    /* Reports Section */
    .reports {
      background: #171717;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 2rem;
      overflow-x: auto;
    }
    .reports header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #242424;
      padding-bottom: 0.5rem;
      margin-bottom: 0.75rem;
    }
    .reports header h3 {
      color: #ffce73;
      margin: 0;
      letter-spacing: 0.5px;
    }
    .reports header small {
      color: #cfcfcf;
    }
    .reports table {
      width: 100%;
      border-collapse: collapse;
    }
    .reports th, .reports td {
      padding: 0.75rem;
      border-bottom: 1px solid #242424;
      text-align: left;
    }
    .reports th {
      color: #cfcfcf;
      font-weight: 600;
    }
    .reports tbody tr:last-child td {
      border-bottom: none;
    }

    /* Doctors Section */
    #doctors {
      background: #171717;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 2rem;
    }
    #doctors h3 {
      color: #ffce73;
      margin-bottom: 1rem;
      letter-spacing: 0.5px;
    }
    #doctors .doctor {
      background: #151515;
      border: 1px solid #242424;
      border-radius: 6px;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    #doctors .doctor:last-child {
      margin-bottom: 0;
    }
    #doctors .doctor .info {
      flex: 1;
    }
    #doctors .doctor strong {
      color: #fff;
      margin-right: 0.5rem;
    }
    #doctors .doctor .specialty {
      color: #ffce73;
    }
    #doctors .doctor .organization {
      color: #cfcfcf;
      font-size: 0.9rem;
      margin-top: 0.25rem;
    }
    #doctors .doctor .contact {
      color: #cfcfcf;
      font-size: 0.9rem;
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <main>
    <!-- Hero Section -->
    <section class="hero">
      <div class="profile-pic">
        <img src="https://placehold.co/140x140" alt="User profile picture with face centered and blurred background" />
      </div>
      <div class="profile-info">
        <div>
          <h1>{{ request.user.first_name|default:request.user.username }}</h1>
          <div class="email">{{ request.user.email }}</div>
          <nav>
            <a href="#chat">Chat</a>
            <a href="#tests-info">About Tests</a>
            <a href="#tests">Take Tests</a>
            <a href="#doctors">Doctors</a>
            <a href="#forum">Forum</a>
          </nav>
        </div>
        <form method="post" action="{% url 'toggle_privacy' %}">
          {% csrf_token %}
          <div class="privacy-toggle">
            <span>Privacy:</span>
            <strong>{{ is_anon|yesno:"Anonymous,Public" }}</strong>
            <button type="submit" class="btn-primary">Toggle</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Carousel Section -->
    <section class="carousel">
      <div class="carousel-inner" id="carousel-inner">
        <div class="carousel-item">
          <h3>PHQ-9</h3>
          <p>9 questions assessing depressive symptoms over the last 2 weeks.</p>
        </div>
        <div class="carousel-item">
          <h3>GAD-7</h3>
          <p>7 questions screening for generalized anxiety symptoms.</p>
        </div>
        <div class="carousel-item">
          <h3>Privacy</h3>
          <p>Reports save as Public or Anonymous based on your toggle (anon ID kept).</p>
        </div>
        <div class="carousel-item">
          <h3>Usage</h3>
          <p>Screening only; consult a professional for diagnosis.</p>
        </div>
      </div>
      <div class="carousel-controls">
        <button id="carousel-prev">&#10094;</button>
        <button id="carousel-next">&#10095;</button>
      </div>
    </section>

    <!-- Tests Section -->
    <section id="tests">
      <a href="#" class="test-card">
        <header>
          <h3>PHQ-9</h3>
          <small>Screening</small>
        </header>
        <p>Assess depression symptoms. Saved as Anonymous.</p>
      </a>
      <a href="#" class="test-card">
        <header>
          <h3>GAD-7</h3>
          <small>Screening</small>
        </header>
        <p>Assess anxiety symptoms. Saved as Anonymous.</p>
      </a>
    </section>

    <!-- Forms Section -->
    <section class="forms-section">
      <!-- Chat -->
      <div id="chat" class="form-card">
        <header>
          <h3>AI Chat</h3>
          <small>Press Enter to send</small>
        </header>
        <div id="chat_box"></div>
        <input id="id_chat" placeholder="Type your message..." />
        <button type="button" id="ws_send">Send</button>
      </div>

      <!-- Forum -->
      <div id="forum" class="form-card">
        <header>
          <h3>Forum</h3>
          <small>Share with peers</small>
        </header>
        <form>
          <label for="id_title">Title</label>
          <input id="id_title" placeholder="Share a thought or question" />
          <label for="id_content">Content</label>
          <textarea id="id_content" rows="4" placeholder="Write your message"></textarea>
          <p>Posting as Anonymous</p>
          <button type="button" id="ws_post">Post</button>
        </form>
        <div class="your-posts"></div>
        <h4>Live Feed</h4>
        <div id="forum_feed"></div>
      </div>
    </section>

    <!-- Reports Section -->
    <section class="reports">
      <header>
        <h3>Reports</h3>
        <small>Recent</small>
      </header>
      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Score</th>
            <th>When</th>
            <th>Mode</th>
          </tr>
        </thead>
        <tbody>
          <!-- Dummy data -->
          <tr><td>PHQ-9</td><td>15</td><td>2023-10-01 10:00</td><td>Anon</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Doctors Section -->
    <section id="doctors">
      <h3>Doctors</h3>
      <div class="doctor">
        <div class="info">
          <div><strong>Dr. John Doe</strong><span class="specialty"> — Psychiatry</span></div>
          <div class="organization">Mental Health Clinic, New York</div>
        </div>
        <div class="contact">Phone: 123-456-7890</div>
      </div>
    </section>
  </main>

  <script>
    // Carousel functionality
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-item');
    const totalSlides = slides.length;
    const carouselInner = document.getElementById('carousel-inner');
    const nextBtn = document.getElementById('carousel-next');
    const prevBtn = document.getElementById('carousel-prev');

    function showSlide(index) {
      if (index >= totalSlides) currentSlide = 0;
      if (index < 0) currentSlide = totalSlides - 1;
      carouselInner.style.transform = `translateX(-${currentSlide * 100}%)`;
    }

    nextBtn.addEventListener('click', () => {
      currentSlide++;
      showSlide(currentSlide);
    });

    prevBtn.addEventListener('click', () => {
      currentSlide--;
      showSlide(currentSlide);
    });

    // Auto slide every 5 seconds
    setInterval(() => {
      currentSlide++;
      showSlide(currentSlide);
    }, 5000);

    // Chat functionality (simplified for demo)
    const chatInput = document.getElementById('id_chat');
    const sendBtn = document.getElementById('ws_send');
    const chatBox = document.getElementById('chat_box');

    function appendChat(sender, message) {
      const div = document.createElement('div');
      div.innerHTML = `<div class="time">${new Date().toLocaleTimeString()}</div><div class="message-content"><strong>${sender}</strong><br><span>${message}</span></div>`;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    sendBtn.addEventListener('click', () => {
      const msg = chatInput.value.trim();
      if (msg) {
        appendChat('You', msg);
        chatInput.value = '';
        // Simulate AI response
        setTimeout(() => appendChat('AI', 'How can I help you today?'), 1000);
      }
    });

    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') sendBtn.click();
    });

    // Forum functionality (simplified)
    const postBtn = document.getElementById('ws_post');
    const forumFeed = document.getElementById('forum_feed');

    postBtn.addEventListener('click', () => {
      const title = document.getElementById('id_title').value.trim();
      const content = document.getElementById('id_content').value.trim();
      if (title && content) {
        const div = document.createElement('div');
        div.innerHTML = `<strong>${title}</strong> — User<div class="content">${content}</div>`;
        forumFeed.appendChild(div);
        document.getElementById('id_title').value = '';
        document.getElementById('id_content').value = '';
      }
    });
  </script>
</body>
</html>
</content>
</create_file>